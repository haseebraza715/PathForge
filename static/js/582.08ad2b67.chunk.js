"use strict";(self.webpackChunkpathforge=self.webpackChunkpathforge||[]).push([[582],{582:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var a=s(555),n=s(43),o=s(250),r=s(585),i=s(648),l=s(24),d=s(579);const c=e=>{let{id:t,milestone:s,onRemove:o,onUpdate:r,errors:c,index:m}=e;const{attributes:u,listeners:x,setNodeRef:p,transform:g,transition:h}=(0,i.gl)({id:t}),[f,b]=(0,n.useState)(s.title),v={transform:l.Ks.Transform.toString(g),transition:h};return(0,d.jsxs)("li",(0,a.A)((0,a.A)((0,a.A)({ref:p,style:v},u),x),{},{className:"bg-gray-700 text-textLight p-4 rounded flex justify-between items-center shadow-md hover:shadow-lg transition duration-300",children:[(0,d.jsxs)("div",{className:"flex-grow",children:[(0,d.jsx)("input",{type:"text",value:f,onChange:e=>{const s=e.target.value;b(s),r(t,s)},placeholder:"Milestone ".concat(m+1),className:"w-full bg-transparent focus:outline-none ".concat(c["milestone-".concat(m)]?"text-red-500":"text-textLight")}),c["milestone-".concat(m)]&&(0,d.jsx)("p",{className:"text-red-500 text-sm mt-1",children:c["milestone-".concat(m)]})]}),(0,d.jsx)("div",{onClick:e=>{e.stopPropagation(),o(t)},style:{pointerEvents:"auto"},children:(0,d.jsx)("button",{className:"text-red-500 hover:text-red-700 font-semibold","aria-label":"Remove milestone",style:{pointerEvents:"none"},children:"Remove"})})]}))},m=()=>{const{id:e}=(0,o.g)(),t=(0,o.Zp)(),[s,l]=(0,n.useState)(""),[m,u]=(0,n.useState)([]),[x,p]=(0,n.useState)({});(0,n.useEffect)((()=>{const s=(JSON.parse(localStorage.getItem("roadmaps"))||[]).find((t=>t.id===e));s?(l(s.title),u(s.milestones)):(alert("Roadmap not found!"),t("/dashboard"))}),[e,t]);const g=(0,r.FR)((0,r.MS)(r.AN),(0,r.MS)(r.uN)),h=e=>{const t=m.filter((t=>t.id!==e));u(t)},f=(e,t)=>{const s=m.map((s=>s.id===e?(0,a.A)((0,a.A)({},s),{},{title:t}):s));u(s)};return(0,d.jsxs)("div",{className:"bg-darkBackground min-h-screen p-6 text-textLight",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Edit Roadmap"}),(0,d.jsxs)("div",{className:"bg-darkCard shadow-lg rounded-lg p-6 max-w-3xl mx-auto",children:[(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsx)("label",{className:"block text-sm font-semibold mb-2",children:"Roadmap Title"}),(0,d.jsx)("input",{type:"text",value:s,onChange:e=>l(e.target.value),placeholder:"Enter your roadmap title",className:"w-full p-3 bg-gray-700 text-textLight rounded focus:outline-none focus:ring-2 ".concat(x.title?"focus:ring-red-500":"focus:ring-accent")}),x.title&&(0,d.jsx)("p",{className:"text-red-500 text-sm mt-1",children:x.title})]}),(0,d.jsx)("h2",{className:"text-lg font-bold text-accent mb-4",children:"Milestones:"}),(0,d.jsx)(r.Mp,{sensors:g,collisionDetection:r.fp,onDragEnd:e=>{const{active:t,over:s}=e;if(t.id!==s.id){const e=m.findIndex((e=>e.id===t.id)),a=m.findIndex((e=>e.id===s.id));u((t=>(0,i.be)(t,e,a)))}},children:(0,d.jsx)(i.gB,{items:m.map((e=>e.id)),strategy:i._G,children:(0,d.jsx)("ul",{className:"space-y-3",children:m.map(((e,t)=>(0,d.jsx)(c,{id:e.id,milestone:e,onRemove:h,onUpdate:f,errors:x,index:t},e.id)))})})}),(0,d.jsx)("button",{onClick:()=>{if(!(()=>{const e={};return s.trim()||(e.title="Title is required."),m.forEach(((t,s)=>{t.title.trim()||(e["milestone-".concat(s)]="Milestone cannot be empty.")})),p(e),0===Object.keys(e).length})())return;const a={id:e,title:s,milestones:m};try{const s=(JSON.parse(localStorage.getItem("roadmaps"))||[]).map((t=>t.id===e?a:t));localStorage.setItem("roadmaps",JSON.stringify(s)),alert("Roadmap updated successfully!"),t("/dashboard")}catch(n){console.error("Error updating roadmap:",n),alert("An error occurred while updating the roadmap.")}},className:"w-full px-4 py-3 bg-accent text-darkBackground font-bold rounded hover:bg-green-600 transition duration-300 mt-6",children:"Save Roadmap"})]})]})}}}]);
//# sourceMappingURL=582.08ad2b67.chunk.js.map